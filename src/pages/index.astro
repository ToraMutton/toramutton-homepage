---
import { getCollection } from 'astro:content';
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { Image } from 'astro:assets';
import heroImage from '../assets/toramutton.jpg';
import rssParser from 'rss-parser';
import {
    Twitter, Github, FileText, FileCode,
    GraduationCap, Milestone, ShieldCheck,
    Sparkles,
    Target, 
    Cpu,
    Music,
    Users,
} from 'lucide-astro';

// === 1. RSSãƒ•ã‚£ãƒ¼ãƒ‰å–å¾— ===
const parser = new rssParser({
    customFields: {
        item: [
            ['media:thumbnail', 'thumbnail'],
            ['enclosure', 'enclosure'],
        ]
    }
});

const isDev = import.meta.env.DEV;

const getImageUrl = (item: any) => {
    // 1. media:thumbnail
    if (item.thumbnail) {
        return typeof item.thumbnail === 'string' ? item.thumbnail : item.thumbnail.$?.url;
    }
    
    // 2. enclosure
    if (item.enclosure?.url) {
        return item.enclosure.url;
    }
    
    // 3. undefinedã‚’è¿”ã™
    return undefined; 
}

interface UnifiedPost {
    title: string;
    url: string;
    date: Date;
    image?: string | any;
    source: 'local' | 'note' | 'zenn';
}

// A. ãƒ­ãƒ¼ã‚«ãƒ«è¨˜äº‹
const localPostsRaw = await getCollection('blog');
const localPosts = localPostsRaw.map(post => ({
    title: post.data.title,
    url: `/blog/${post.id}/`,
    date: post.data.pubDate,
    image: post.data.heroImage, 
    tags: post.data.tags,
    source: 'local' as const
}));

// B. Noteè¨˜äº‹
let notePosts: UnifiedPost[] = [];
if (!isDev) {
    try {
        const noteFeed = await parser.parseURL('https://note.com/toramutton/rss');
        notePosts = noteFeed.items.map((item: any) => ({
            title: item.title || 'ç„¡é¡Œ',
            url: item.link || '',
            date: new Date(item.pubDate || new Date()),
            image: getImageUrl(item),
            source: 'note'
        }));
    } catch (e) { console.error("Note RSS fetch failed", e); }
}

// C. Zennè¨˜äº‹
let zennPosts: UnifiedPost[] = [];
if (!isDev) {
    try {
        const zennFeed = await parser.parseURL('https://zenn.dev/toramutton/feed'); 
        zennPosts = zennFeed.items.map((item: any) => ({
            title: item.title || 'ç„¡é¡Œ',
            url: item.link || '',
            date: new Date(item.pubDate || new Date()),
            image: item.enclosure?.url,
            source: 'zenn'
        }));
    } catch (e) { console.error("Zenn RSS fetch failed", e); }
}

// D. çµ±åˆãƒ»ã‚½ãƒ¼ãƒˆãƒ»æŠ½å‡º
const latestPosts = [...localPosts, ...notePosts, ...zennPosts]
    .sort((a, b) => b.date.valueOf() - a.date.valueOf())
    .slice(0, 3); /* æœ€æ–°è¨˜äº‹3ã¤ */

// === 2. ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ ===
const missions = [
    { title: "1å¹´å¾ŒæœŸçµ‚äº†", date: "2026-02-13", icon: GraduationCap },
    { title: "2026å¹´çµ‚äº†ã¾ã§", date: "2026-12-31", icon: Milestone },
    { title: "åŸºæœ¬æƒ…å ±æŠ€è¡“è€…è©¦é¨“", date: "2026-03-10", icon: ShieldCheck },
];

const today = new Date();
const missionData = missions.map(m => {
    const target = new Date(m.date);
    const diff = target.getTime() - today.getTime();
    const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
    return { ...m, days };
});

interface FriendLink {
    name: string;
    url: string;
    description: string;
}

const friendLinks: FriendLink[] = [
    {
        name: "ã—ãŠã‚ŠğŸ”–ã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸",
        url: "https://shiori-02-14.github.io/Homepage/index.html",
        description: "æ¨ã—æ„›ã«æº¢ã‚Œã‚‹æœ€é«˜ã®ã‚µã‚¤ãƒˆ"
    },
    {
        name: "ã—ã°ã‹ã·ãƒ¡ãƒ¢",
        url: "https://memo.shibadogcap.com/",
        description: "ã‚¯ãƒ¬ãƒ¼ãƒ³ã‚²ãƒ¼ãƒ ã¨è‡ªä½œã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ç†±è¡€"
    },
    {
        name: "ç¶¿ç³¸ã¦ã›",
        url: "https://ctes091x.net/",
        description: "PGP KeyãŒç½®ã„ã¦ã‚ã‚Šã¾ã™"
    },
    {
        name: "ThunFaskyã®ã‚µã‚¤ãƒˆ",
        url: "https://thunfasky.com/",
        description: "PCæ§‹æˆã®æ©å¸«ã§ã‚ã‚Šã€1ã‚¯ãƒ©ã®ã‚­ãƒã‚¬ã‚¤æ‹…å½“"
    },
    {
        name: "Cotton's website",
        url: "https://cotton7.me/",
        description: "åŒã˜.meæ´¾é–¥ã§ã†ã‚Œã—ã„"
    }
];
---

<!doctype html>
<html lang="ja">
    <head>
        <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    </head>
    <body>
        <Header />
        <main>
            <section class="hero">
                <div class="hero-container">
                    <div class="hero-image-container">
                        <Image src={heroImage} alt="ãƒˆãƒ©ãƒãƒˆã®ã‚¢ã‚¤ã‚³ãƒ³" class="hero-img" />
                    </div>
                    
                    <div class="hero-text-group">
                        <h1 class="hero-title">ãƒˆãƒ©ãƒãƒˆã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</h1>
                        <p class="tagline">UEC25 I é¡</p>
                        
                        <p class="hero-desc">
                            ã„ã‚ã‚“ãªæŠ€è¡“ã‚’æ°—ã¾ã¾ã«å‹‰å¼·ä¸­<br>
                            æ¥½ã—ãç”Ÿãã‚‹ï¼
                        </p>

                        <div class="hero-actions">
                            <a href="/about" class="primary-btn">
                                More About Me <span class="arrow">â†’</span>
                            </a>
                        </div>

                        <div class="social-links">
                            <a href="https://twitter.com/ToraMutton" target="_blank" rel="noopener noreferrer" class="social-btn twitter-icon">
                                <Twitter size={18} /> <span>Daily</span>
                            </a>
                            <a href="https://twitter.com/ToraMutton_tech" target="_blank" rel="noopener noreferrer" class="social-btn twitter-icon">
                                <Twitter size={18} /> <span>Tech</span>
                            </a>
                            <a href="https://github.com/ToraMutton" target="_blank" rel="noopener noreferrer" class="social-btn github-icon">
                                <Github size={18} /> <span>GitHub</span>
                            </a>
                            <a href="https://note.com/toramutton" target="_blank" rel="noopener noreferrer" class="social-btn note-icon">
                                <svg role="img" viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
                                    <path d="M0 .279c4.623 0 10.953-.235 15.498-.117 6.099.156 8.39 2.813 8.468 9.374.077 3.71 0 14.335 0 14.335h-6.598c0-9.296.04-10.83 0-13.759-.078-2.578-.814-3.807-2.795-4.041-2.097-.235-7.975-.04-7.975-.04v17.84H0Z" />
                                </svg>
                                <span>note</span>
                            </a>
                            <a href="https://zenn.dev/toramutton" target="_blank" rel="noopener noreferrer" class="social-btn zenn-icon">
                                <svg role="img" viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                    <path d="M.264 23.771h4.984c.264 0 .498-.147.645-.352L19.614.874c.176-.293-.029-.645-.381-.645h-4.72c-.235 0-.44.117-.557.323L.03 23.361c-.088.176.029.41.234.41zM17.445 23.419l6.479-10.408c.205-.323-.029-.733-.41-.733h-4.691c-.176 0-.352.088-.44.235l-6.655 10.643c-.176.264.029.616.352.616h4.779c.234-.001.468-.118.586-.353z" />
                                </svg>
                                <span>Zenn</span>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <section class="recent-posts">
                <div class="section-header">
                    <h2>æœ€æ–°ã®è¨˜äº‹</h2>
                    <a href="/blog" class="view-all">ã™ã¹ã¦ã®è¨˜äº‹ã‚’è¦‹ã‚‹ â†’</a>
                </div>
                <div class="post-grid">
                    {latestPosts.map((post) => (
                        <a href={post.url} class="post-card-mini" target={post.source !== 'local' ? "_blank" : "_self"}>
                            <div class="post-thumb">
                                {/* 1. ç”»åƒã‚’å…ˆã« */}
                                {post.source === 'local' && typeof post.image === 'object' ? (
                                    <Image src={post.image} alt="" />
                                ) : post.image && typeof post.image === 'string' ? (
                                    <img src={post.image} alt="" loading="lazy" />
                                ) : (
                                    <div class="no-image-placeholder">No Image</div>
                                )}

                                {/* 2. ãƒãƒƒã‚¸ã‚’å¾Œã« */}
                                <span class={`badge badge-${post.source}`}>{post.source.toUpperCase()}</span>
                            </div>
                            <div class="post-info">
                                <time datetime={post.date.toISOString()}>
                                    {post.date.toLocaleDateString('ja-JP', {
                                        year: 'numeric',
                                        month: '2-digit',
                                        day: '2-digit',
                                    })}
                                </time>
                                <h3 class="post-title">{post.title}</h3>
                            </div>
                        </a>
                    ))}
                </div>
            </section>

            <div class="grid-container">
                <div class="glass-card mission-card">
                    <div class="card-header">
                        <Target class="icon-secondary" size={24} />
                        <h3>Countdown</h3>
                    </div>
                    <div class="mission-list">
                        {missionData.map((m) => (
                            <div class="mission-item">
                                <div class="mission-info">
                                    <span class="mission-icon">
                                        <m.icon size={20} strokeWidth={2.5} />
                                    </span>
                                    <span class="mission-title">{m.title}</span>
                                </div>
                                <div class="mission-days">
                                    <span class="days-num">{m.days}</span>
                                    <span class="days-unit">days</span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                <div class="glass-card project-card">
                    <div class="card-header">
                        <Cpu class="icon-blue" size={24} />
                        <h3>My Desktop PC</h3>
                    </div>
                    <p class="card-desc">
                        Ryzen 7 7700 + Radeon RX 9060 XT 16GB æ§‹æˆã€‚
                        2026/02/13~
                    </p>
                    <div class="dedicated-link">
                        <a href="/about#trapezium">View Details â†’</a>
                    </div>
                </div>

                <div class="glass-card advent-card">
                    <div class="card-header">
                        <Sparkles class="icon-secondary" size={24} />
                        <h3>Advent 2026</h3>
                    </div>
                    <p class="card-desc">
                        ãªã‚“ã¨ã€ä¸€äººã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼2026ã€‚
                    </p>
                    <div class="coming-soon-badge">Coming soon...</div>
                </div>

                <div class="glass-card links-card">
                    <div class="card-header">
                        <Users class="icon-secondary" size={24} />
                        <h3>Links</h3>
                    </div>

                    <div class="link-list">
                        {friendLinks.map((link) => (
                            <a href={link.url} target="_blank" rel="noopener noreferrer" class="link-item">
                                <span class="link-name">
                                    {link.name}
                                    <span class="external-icon">â†—</span>
                                </span>
                                <span class="link-desc">{link.description}</span>
                            </a>
                        ))}
                    </div>
                </div>
            </div>

            <div class="glass-card recommendation-card">
                <div class="card-header">
                    <Music class="icon-secondary" size={24} />
                    <h3>Today's Music</h3>
                </div>
                
                <div id="song-display" class="song-container">
                    <p class="song-title" id="song-title">Loading...</p>
                    <p class="song-year-wrapper">
                        released in <span id="song-year" class="song-year">----</span>
                    </p>
                </div>
                
                <button id="next-song-btn" class="secondary-btn">
                    ãƒªãƒ­ãƒ¼ãƒ‰ <span class="arrow">â†’</span>
                </button>
            </div>

            <script>
                // å…¨æ›²ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
                document.addEventListener('astro:page-load', () => {
                const songs = [
            // =====================
            // 2012 (diorama)
            // =====================
            { title: "è¡—", year: "2012" },
            { title: "ã‚´ãƒ¼ã‚´ãƒ¼å¹½éœŠèˆ¹", year: "2012" },
            { title: "é§„è“å­å±‹å•†å£²", year: "2012" },
            { title: "caribou", year: "2012" },
            { title: "ã‚ã‚ãµã‚Šå©¦äºº", year: "2012" },
            { title: "ãƒ‡ã‚£ã‚¹ã‚³ãƒãƒ«ãƒ¼ãƒ³", year: "2012" },
            { title: "vivi", year: "2012" },
            { title: "ãƒˆã‚¤ãƒ‘ãƒˆãƒªã‚ªãƒƒãƒˆ", year: "2012" },
            { title: "æ‹ã¨ç—…ç†±", year: "2012" },
            { title: "Black Sheep", year: "2012" },
            { title: "ä¹¾æ¶¸ã³ãŸãƒã‚¹ã²ã¨ã¤", year: "2012" },
            { title: "é¦–ãªã—é–‘å¤é³¥", year: "2012" },
            { title: "å¿ƒåƒæ”¾æ˜ ", year: "2012" },
            { title: "æŠ„æœ¬", year: "2012" },

            // =====================
            // 2013 (Singles / then later in YANKEE etc.)
            // =====================
            { title: "ã‚µãƒ³ã‚¿ãƒãƒªã‚¢", year: "2013" },
            { title: "ç™¾é¬¼å¤œè¡Œ", year: "2013" },
            { title: "ç¬›å¹ã‘ã©ã‚‚è¸Šã‚‰ãš", year: "2013" },

            { title: "MAD HEAD LOVE", year: "2013" },
            { title: "ãƒãƒƒãƒ”ãƒ³ã‚¢ãƒ‘ã‚·ãƒ¼", year: "2013" },
            { title: "é³¥ã«ã§ã‚‚ãªã‚ŠãŸã„", year: "2013" }, 

            // =====================
            // 2014 (YANKEEä¸­å¿ƒã€‚åˆå‡ºãŒ2013/2014ã®æ›²ã¯ year ãã‚Œã«åˆã‚ã›ã‚‹)
            // =====================
            { title: "ãƒªãƒ“ãƒ³ã‚°ãƒ‡ãƒƒãƒ‰ãƒ»ãƒ¦ãƒ¼ã‚¹", year: "2014" }, 
            { title: "WOODEN DOLL", year: "2014" },

            { title: "ã‚¢ã‚¤ãƒã‚¯ãƒ©ã‚¤ãƒ", year: "2014" },

            { title: "ãƒ¡ãƒ©ãƒ³ã‚³ãƒªãƒ¼ã‚­ãƒƒãƒãƒ³", year: "2014" },
            { title: "èŠ±ã«åµ", year: "2014" },
            { title: "æµ·ã¨å±±æ¤’é­š", year: "2014" },
            { title: "ã—ã¨ã©æ™´å¤©å¤§è¿·æƒ‘", year: "2014" },
            { title: "çœ¼ç¦", year: "2014" },
            { title: "ãƒ›ãƒ©å¹ãçŒ«é‡éƒ", year: "2014" },
            { title: "TOXIC BOY", year: "2014" },
            { title: "KARMA CITY", year: "2014" },
            { title: "ãƒ‰ãƒ¼ãƒŠãƒ„ãƒ›ãƒ¼ãƒ«", year: "2014" },

            // =====================
            // 2015 (Bremen)
            // =====================
            { title: "ã‚¢ãƒ³ãƒ“ãƒªãƒ¼ãƒãƒ¼ã‚º", year: "2015" },
            { title: "ãƒ•ãƒ­ãƒ¼ãƒ©ã‚¤ãƒˆ", year: "2015" },
            { title: "å†ä¸Šæ˜ ", year: "2015" },
            { title: "Flowerwall", year: "2015" },
            { title: "ã‚ãŸã—ã¯ã‚†ã†ã‚Œã„", year: "2015" },
            { title: "ã‚¦ã‚£ãƒ«ã‚ªã‚¦ã‚£ã‚¹ãƒ—", year: "2015" },
            { title: "Undercover", year: "2015" },
            { title: "Neon Sign", year: "2015" },
            { title: "ãƒ¡ãƒˆãƒ­ãƒãƒ¼ãƒ ", year: "2015" },
            { title: "é›¨ã®è¡—è·¯ã«å¤œå…‰èŸ²", year: "2015" },
            { title: "ã‚·ãƒ³ãƒ‡ãƒ¬ãƒ©ã‚°ãƒ¬ã‚¤", year: "2015" },
            { title: "ãƒŸãƒ©ãƒ¼ã‚¸ãƒ¥ã‚½ãƒ³ã‚°", year: "2015" },
            { title: "ãƒ›ãƒ¼ãƒ—ãƒ©ãƒ³ãƒ‰", year: "2015" },
            { title: "Blue Jasmine", year: "2015" }, 

            { title: "æ‡ºæ‚”ã®è¡—", year: "2015"},
            { title: "ãƒšãƒˆãƒªã‚³ãƒ¼ãƒ«", year: "2015"},

            { title: "æ—…äººé›»ç‡ˆ", year: "2015"},
            { title: "ã“ã“ã‚ã«ãã ã‚‚ã®", year: "2015"},

            // =====================
            // 2016 (LOSER/ãƒŠãƒ³ãƒãƒ¼ãƒŠã‚¤ãƒ³ single + c/w)
            // =====================
            { title: "LOSER", year: "2016" },
            { title: "ãƒŠãƒ³ãƒãƒ¼ãƒŠã‚¤ãƒ³", year: "2016" },
            { title: "amen", year: "2016" }, 

            { title: "ãƒ©ãƒ©ãƒã‚¤ã•ã‚ˆãªã‚‰", year: "2017"},
            { title: "ç¿¡ç¿ ã®ç‹¼", year: "2017"},

            { title: "Neighbourhood", year: "2017"},
            { title: "ã‚†ã‚ãã„ã—ã‚‡ã†ã˜ã‚‡", year: "2017"},

            // =====================
            // 2017 (BOOTLEGæ™‚ä»£ã®åˆå‡ºæ›²)
            // =====================
            { title: "é£›ç‡•", year: "2017" },
            { title: "ãƒ”ãƒ¼ã‚¹ã‚µã‚¤ãƒ³", year: "2017" },
            { title: "ç ‚ã®æƒ‘æ˜Ÿ", year: "2017" },
            { title: "orion", year: "2017" },
            { title: "ã‹ã„ã˜ã‚…ã†ã®ãƒãƒ¼ãƒ", year: "2017" },
            { title: "Moonlight", year: "2017" },
            { title: "æ˜¥é›·", year: "2017" },
            { title: "fogbound", year: "2017" },
            { title: "çˆ±ä¸½ä¸", year: "2017" },
            { title: "Nighthawks", year: "2017" },
            { title: "æ‰“ä¸ŠèŠ±ç«", year: "2017" },
            { title: "ç°è‰²ã¨é’", year: "2017" },
            

            // =====================
            // 2018 (Lemon / Flamingo-TEENAGE RIOT + Bé¢ãŸã¡)
            // =====================
            { title: "Lemon", year: "2018" },
            { title: "ã‚¯ãƒ©ãƒ³ãƒ™ãƒªãƒ¼ã¨ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­", year: "2018" },
            { title: "Paper Flower", year: "2018" },

            { title: "Flamingo", year: "2018" },
            { title: "TEENAGE RIOT", year: "2018" },
            { title: "ã”ã‚ã‚“ã­", year: "2018" }, // Flamingo/TEENAGE RIOT c/wï¼ˆBé¢ï¼‰ :contentReference[oaicite:8]{index=8}

            // =====================
            // 2019 (é¦¬ã¨é¹¿ single + c/w)
            // =====================
            { title: "é¦¬ã¨é¹¿", year: "2019" },
            { title: "æµ·ã®å¹½éœŠ", year: "2019" },
            { title: "ã§ã—ã‚‡ã¾ã—ã‚‡", year: "2019" }, // é¦¬ã¨é¹¿ c/w :contentReference[oaicite:9]{index=9}

            // =====================
            // 2020 (STRAY SHEEPåˆå‡ºãƒˆãƒ©ãƒƒã‚¯ç¾¤)
            // =====================
            { title: "ã‚«ãƒ ãƒ‘ãƒãƒ«ãƒ©", year: "2020" },
            { title: "æ„Ÿé›»", year: "2020" },
            { title: "PLACEBO ï¼‹ é‡ç”°æ´‹æ¬¡éƒ", year: "2020" },
            { title: "ãƒ‘ãƒ—ãƒªã‚«", year: "2020" }, // ã‚»ãƒ«ãƒ•ã‚«ãƒãƒ¼åéŒ² :contentReference[oaicite:10]{index=10}
            { title: "å„ªã—ã„äºº", year: "2020" },
            { title: "ã¾ã¡ãŒã„ã•ãŒã—", year: "2020" }, // ã‚»ãƒ«ãƒ•ã‚«ãƒãƒ¼ï¼ˆã‚¢ãƒ«ãƒãƒ åéŒ²ï¼‰ :contentReference[oaicite:11]{index=11}
            { title: "ã²ã¾ã‚ã‚Š", year: "2020" },
            { title: "è¿·ãˆã‚‹ç¾Š", year: "2020" },
            { title: "DÃ©colletÃ©", year: "2020" },
            { title: "ã‚«ãƒŠãƒªãƒ¤", year: "2020" }, 

            { title: "ã‚«ã‚¤ãƒˆ", year: "2019"},

            // =====================
            // 2021â€“2023ï¼ˆLOST CORNERåéŒ²ã®æ—¢ç™ºæ›²ï¼‰
            // =====================
            { title: "Pale Blue", year: "2021" },
            { title: "ã‚†ã‚ã†ã¤ã¤", year: "2021" },
            { title: "æ­»ç¥", year: "2021"},

            { title: "POP SONG", year: "2022" },
            { title: "Må…«ä¸ƒ", year: "2022" },
            { title: "KICK BACK", year: "2022" },

            { title: "LADY", year: "2023" },
            { title: "æœˆã‚’è¦‹ã¦ã„ãŸ", year: "2023" },
            { title: "åœ°çƒå„€", year: "2023" },

            // =====================
            // 2024ï¼ˆLOST CORNERæ–°è¦æ›² + æŒ‡å®šã®Azaleaï¼‰
            // =====================
            { title: "RED OUT", year: "2024" },
            { title: "ãƒãƒ«ã‚²ãƒªãƒ¼ã‚¿ ï¼‹ ã‚¢ã‚¤ãƒŠãƒ»ã‚¸ãƒ»ã‚¨ãƒ³ãƒ‰", year: "2024" },
            { title: "æ¯æ—¥", year: "2024" },
            { title: "ã•ã‚ˆãƒ¼ãªã‚‰ã¾ãŸã„ã¤ã‹ï¼", year: "2024" },
            { title: "ã¨ã¾ã‚Œã¿ã‚ˆ", year: "2024" },
            { title: "LENS FLARE", year: "2024" },
            { title: "ãŒã‚‰ããŸ", year: "2024" },
            { title: "YELLOW GHOST", year: "2024" },
            { title: "POST HUMAN", year: "2024" },
            { title: "LOST CORNER", year: "2024" },
            { title: "ãŠã¯ã‚ˆã†", year: "2024" }, // LOST CORNER 20æ›² :contentReference[oaicite:13]{index=13}

            { title: "Azalea", year: "2024" }, // ãƒ‡ã‚¸ã‚¿ãƒ«ã‚·ãƒ³ã‚°ãƒ«æ  :contentReference[oaicite:14]{index=14}

            // =====================
            // 2025ï¼ˆã‚ãªãŸãŒæŒ‡å®šã—ãŸæ›²ï¼‰
            // =====================
            { title: "Plazma", year: "2025" },
            { title: "BOW AND ARROW", year: "2025" }, // åŒã‚·ãƒ³ã‚°ãƒ«åéŒ² :contentReference[oaicite:15]{index=15}
            { title: "IRIS OUT", year: "2025" },
            { title: "JANE DOE", year: "2025" },
            { title: "1991", year: "2025" }, // ãƒ‡ã‚£ã‚¹ã‚³ã‚°ãƒ©ãƒ•ã‚£ãƒ¼ã«æ²è¼‰ :contentReference[oaicite:16]{index=16}
            ];

                const titleEl = document.getElementById('song-title');
                const yearEl = document.getElementById('song-year');
                const btn = document.getElementById('next-song-btn');

                function updateSong() {
                    if (!titleEl || !yearEl) return;
                    const randomSong = songs[Math.floor(Math.random() * songs.length)];
                    titleEl.innerText = randomSong.title;
                    yearEl.innerText = randomSong.year;
                    
                    titleEl.classList.remove('fade-in');
                    void titleEl.offsetWidth; // ãƒªãƒ•ãƒ­ãƒ¼
                    titleEl.classList.add('fade-in');
                }

                btn?.addEventListener('click', updateSong);
                updateSong();
            });


            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            const style3D = `
                font-weight: 900;
                font-size: 2.5rem;
                color: #bae6fd;
                text-shadow: 
                    0 1px 0 #0ea5e9,
                    0 2px 0 #0284c7,
                    0 3px 0 #0369a1,
                    0 4px 0 #075985,
                    0 5px 0 #0c4a6e,
                    0 6px 1px rgba(0,0,0,0.1),
                    0 0 5px rgba(0,0,0,0.1),
                    0 1px 3px rgba(0,0,0,0.3),
                    0 3px 5px rgba(0,0,0,0.2),
                    0 5px 10px rgba(0,0,0,0.25),
                    0 10px 10px rgba(0,0,0,0.2),
                    0 20px 20px rgba(0,0,0,0.15);
            `;

            // AAç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«
            const styleAA = "font-family: 'Menlo', 'Consolas', monospace; font-weight: bold; color: #38bdf8; line-height: 1.2;";
            const styleBody = "font-family: sans-serif; color: #7dd3fc; font-size: 0.9rem;";

            // 1. ç«‹ä½“ãƒ­ã‚´
            console.log("%cToraMutton's Homepage", style3D);
  
  // 2. å·¨å¤§ã‚¢ã‚¹ã‚­ãƒ¼ã‚¢ãƒ¼ãƒˆ
  // âš ï¸ æ•´å½¢ã™ã‚‹ãªï¼æ•´å½¢ã™ã‚‹ãªï¼
  console.log(
    `%c
  ______                 __  ___      __  __            
 /_  __/___  ________ _ /  |/  /_  __/ /_/ /_____  ____ 
  / / / __ \\/ ___/ __ \`/ /|_/ / / / / __/ __/ __ \\/ __ \\
 / / / /_/ / /  / /_/ / /  / / /_/ / /_/ /_/ /_/ / / / /
/_/  \\____/_/   \\__,_/_/  /_/\\__,_/\\__/\\__/\\____/_/ /_/ 
            `,
            styleAA
        );

        // 3. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        console.log(
            `%c
        ğŸš€ Built with Astro & Vercel.
        -----------------------------------
        Looking for bugs?
        Thanks for visiting!
            `,
            styleBody
        );
        </script>
        </main>
        <Footer />
    </body>
</html>

<style>
    /* =========================================
       1. ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ (ãƒˆãƒƒãƒ—ã®é¡”)
       ========================================= */
    .hero {
        padding: 6rem 0 4rem;
    }

    .hero-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 3rem;
        max-width: 900px;
        margin: 0 auto;
    }

    .hero-text-group {
        text-align: left;
    }

    .hero-img {
        border-radius: 50%;
        width: 180px;
        height: 180px;
        object-fit: cover;
        box-shadow: 0 0 40px rgba(253, 224, 71, 0.3), 0 0 40px rgba(253, 224, 71, 0.15);
        animation: float-natural 7s ease-in-out infinite;
    }

    /* :global(html.dark) .hero-img {
        box-shadow: 0 0 15px rgba(253, 224, 71, 0.3), 0 0 40px rgba(253, 224, 71, 0.15);
    } */

    .hero-title {
        margin: 0;
        font-size: 2.0rem;
        font-weight: 800;
        letter-spacing: -0.02em;
    }

    .tagline {
        margin-top: 0.5rem;
        margin-bottom: 1.5rem;
        color: var(--text-main);
        font-size: 1rem;
        font-weight: 700;
        opacity: 0.8;
    }

    .hero-desc {
        font-size: 0.95rem;
        margin-bottom: 2rem;
        color: var(--text-muted);
        line-height: 1.7;
    }

    .hero-actions {
        margin-bottom: 2rem;
    }

    /* =========================================
       2. ãƒœã‚¿ãƒ³ãƒ»ãƒªãƒ³ã‚¯ãƒ»ã‚¢ã‚¤ã‚³ãƒ³é¡
       ========================================= */
    /* ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³ */
    .primary-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.8rem 1.8rem;
        background: var(--accent-blue);
        color: #fff;
        font-weight: 700;
        text-decoration: none;
        border-radius: 99px;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .primary-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        opacity: 0.9;
    }

    .primary-btn:hover .arrow {
        transform: translateX(4px);
    }

    .arrow {
        transition: transform 0.2s ease;
    }

    /* ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒœã‚¿ãƒ³ */
    .social-links {
        display: flex;
        flex-wrap: wrap;
        gap: 0.8rem;
        margin-top: 1.5rem;
    }

    .social-btn {
        display: flex;
        align-items: center;
        gap: 0.6rem;
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
        font-weight: 600;
        text-decoration: none;
        color: var(--text-main);
        background: rgba(0, 0, 0, 0.04);
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    :global(html.dark) .social-btn {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.1); /* å°‘ã—æ˜ã‚‹ãã—ã¦è¦–èªæ€§ã‚¢ãƒƒãƒ— */
    }

    .social-btn:hover {
        transform: translateY(-3px);
        border-color: var(--accent-blue);
        background: rgba(2, 132, 199, 0.05);
    }

    /* === ãƒ–ãƒ©ãƒ³ãƒ‰åˆ¥ãƒ›ãƒãƒ¼è¨­å®šï¼ˆè©³ç´°åº¦å¼·åŒ–ç‰ˆï¼‰ === */
    
    /* 1. Twitter (è‡ªç§°X) */
    .twitter-icon:hover {
        border-color: #1DA1F2;
        background: rgba(29, 161, 242, 0.05);
        color: #1DA1F2;
    }
    .twitter-icon:hover :global(svg) { color: #1DA1F2; }
    
    /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ç™ºå…‰ */
    :global(html.dark) .twitter-icon:hover {
        border-color: #1DA1F2;
        color: #1DA1F2;
        /* box-shadow: 0 0 10px rgba(29, 161, 242, 0.4);  */
    }

    /* 2. GitHub */
    .github-icon:hover { 
        border-color: #333; 
        background: rgba(0, 0, 0, 0.05); 
        color: #333; 
    }
    /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ç™½ãç™ºå…‰ */
    :global(html.dark) .github-icon:hover { 
        border-color: #ffffff; 
        background: rgba(255, 255, 255, 0.1); 
        color: #ffffff; 
        /* box-shadow: 0 0 10px rgba(255, 255, 255, 0.3); */
    }

    /* 3. Note */
    .note-icon:hover {
        border-color: #41C9B4;
        background: rgba(65, 201, 180, 0.05);
        color: #41C9B4;
    }
    .note-icon:hover svg { color: #41C9B4; }

    :global(html.dark) .note-icon:hover {
        border-color: #41C9B4;
        color: #41C9B4;
        /* box-shadow: 0 0 10px rgba(65, 201, 180, 0.4); */
    }

    /* 4. Zenn */
    .zenn-icon:hover {
        border-color: #3EA8FF;
        background: rgba(62, 168, 255, 0.05);
        color: #3EA8FF;
    }
    .zenn-icon:hover svg { color: #3EA8FF; }

    :global(html.dark) .zenn-icon:hover {
        border-color: #3EA8FF;
        color: #3EA8FF;
        /* box-shadow: 0 0 10px rgba(62, 168, 255, 0.4); */
    }

    /* =========================================
       3. æœ€æ–°ã®è¨˜äº‹ãƒªã‚¹ãƒˆ (Post Grid)
       ========================================= */
    .recent-posts {
        margin: 4rem 0;
    }

    .section-header {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        margin-bottom: 1.5rem;
    }

    .section-header h2 {
        margin: 0;
        font-size: 1.5rem;
    }

    .view-all {
        font-size: 0.9rem;
        color: var(--text-muted);
    }

    .view-all:hover {
        color: var(--accent-blue);
        text-decoration: none;
    }

    .post-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
    }

    .post-card-mini {
        display: flex;
        flex-direction: column;
        background: var(--surface);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 12px;
        overflow: hidden;
        text-decoration: none;
        color: var(--text-main);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    :global(html.dark) .post-card-mini {
        background: #ffffff08;
        border-color: rgba(255, 255, 255, 0.1);
    }

    .post-card-mini:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .post-thumb {
        position: relative;
        width: 100%;
        aspect-ratio: 16/9;
        background: #333;
        overflow: hidden;
    }

    .post-thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
    }

    .post-card-mini:hover .post-thumb img {
        transform: scale(1.05);
    }

    .no-image-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(125, 211, 252, 0.1);
        color: var(--text-muted);
        font-size: 0.8rem;
        font-weight: 700;
    }

    .badge {
        position: absolute;
        top: 8px;
        right: 8px;
        padding: 2px 8px;
        font-size: 0.6rem;
        font-weight: 800;
        color: #fff;
        border-radius: 4px;
        backdrop-filter: blur(4px);
        letter-spacing: 0.05em;
    }

    .badge-local { background: rgba(2, 132, 199, 0.8); }
    .badge-note { background: rgba(45, 187, 160, 0.9); }
    .badge-zenn { background: rgba(62, 168, 255, 0.9); }

    .post-info {
        padding: 1rem;
    }

    .post-info time {
        font-size: 0.8rem;
        color: var(--text-muted);
        font-family: 'JetBrains Mono', monospace;
        display: block;
        margin-bottom: 0.3rem;
    }

    .post-title {
        font-size: 1rem;
        margin: 0;
        line-height: 1.5;
        font-weight: 600;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* =========================================
       4. ã‚°ãƒªãƒƒãƒ‰ã‚³ãƒ³ãƒ†ãƒŠ & å…±é€šã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«
       ========================================= */
    .grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
    }

    /* å…±é€šã‚¬ãƒ©ã‚¹é¢¨ã‚«ãƒ¼ãƒ‰ */
    .glass-card {
        display: flex;
        flex-direction: column;
        height: 100%;
        padding: 1.5rem;
        border-radius: 16px;
        border: 1px solid rgba(0, 0, 0, 0.1);
        background: var(--surface);
    }

    :global(html.dark) .glass-card {
        background: rgba(255, 255, 255, 0.03);
        border-color: rgba(255, 255, 255, 0.1);
    }

    .card-header {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        margin-bottom: 1rem;
    }

    .glass-card h3 {
        margin: 0;
        font-size: 1.2rem;
        color: var(--accent-secondary);
    }

    .card-desc {
        font-size: 0.85rem;
        color: var(--text-muted);
        line-height: 1.6;
        flex-grow: 1;
    }

    .icon-blue { color: var(--accent-blue); }
    .icon-secondary { color: var(--accent-secondary); }

    /* =========================================
       5. å„ç¨®ã‚«ãƒ¼ãƒ‰è©³ç´° (Mission, PC, Advent)
       ========================================= */
    /* Countdownã‚«ãƒ¼ãƒ‰ */
    .mission-list {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
        margin: 1rem 0;
    }

    .mission-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.8rem 1rem;
        background: rgba(0, 0, 0, 0.03);
        border-radius: 8px;
        border-left: 3px solid var(--accent-blue);
    }

    :global(html.dark) .mission-item {
        background: rgba(255, 255, 255, 0.03);
    }

    .mission-info {
        display: flex;
        align-items: center;
        gap: 0.8rem;
    }

    .mission-title {
        font-weight: 600;
        font-size: 0.95rem;
    }

    .mission-days {
        display: flex;
        align-items: baseline;
        gap: 0.3rem;
        font-family: 'JetBrains Mono', monospace;
    }

    .days-num {
        font-size: 1.4rem;
        font-weight: 800;
        color: var(--accent-secondary);
    }

    .days-unit {
        font-size: 0.7rem;
        color: var(--text-muted);
    }

    /* è‡ªä½œPCã‚«ãƒ¼ãƒ‰ */
    .dedicated-link {
        margin-top: 1.5rem;
    }

    .dedicated-link a {
        display: block;
        padding: 0.5rem;
        background: rgba(2, 132, 199, 0.08);
        border: 1px solid rgba(2, 132, 199, 0.3);
        border-radius: 6px;
        text-align: center;
        font-size: 0.75rem;
        font-weight: 800;
        color: var(--accent-blue);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        text-decoration: none;
        transition: all 0.2s ease;
    }

    :global(html.dark) .dedicated-link a {
        background: rgba(125, 211, 252, 0.05);
        border-color: rgba(125, 211, 252, 0.2);
    }

    .dedicated-link a:hover {
        background: rgba(2, 132, 199, 0.15);
        border-color: var(--accent-blue);
        transform: translateY(-2px);
    }

    /* ä¸€äººãƒ‰ãƒ™ã‚«ãƒ¬2026ã‚«ãƒ¼ãƒ‰ */
    .coming-soon-badge {
        margin-top: 1.5rem;
        padding: 0.5rem;
        background: rgba(122, 122, 122, 0.08);
        border: 1px solid rgba(0, 0, 0, 0.1);
        color: var(--text-muted);
        border-radius: 6px;
        text-align: center;
        font-size: 0.75rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    :global(html.dark) .coming-soon-badge {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.05);
        color: rgba(255, 255, 255, 0.2);
    }

    .advent-card {
        border: 2px dashed rgba(142, 142, 142, 0.3) !important;
        background: rgba(217, 119, 6, 0.03) !important;
    }

    :global(html.dark) .advent-card {
        border: 2px dashed rgba(99, 99, 99, 0.2) !important;
        background: rgba(103, 103, 103, 0.02) !important;
    }

    /* =========================================
       6. ãƒªãƒ³ã‚¯é›†ã‚«ãƒ¼ãƒ‰ (Links)
       ========================================= */
    .link-list {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
        margin: 1rem 0;
    }

    .link-item {
        display: flex;
        flex-direction: column;
        padding: 0.8rem 1rem;
        background: rgba(0, 0, 0, 0.03);
        border-radius: 8px;
        text-decoration: none;
        border-left: 3px solid var(--accent-blue);
        transition: all 0.2s ease;
    }

    :global(html.dark) .link-item {
        background: rgba(255, 255, 255, 0.03);
    }

    .link-item:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: scale(1.02);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .link-name {
        font-weight: 700;
        color: var(--text-main);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .external-icon {
        font-size: 0.8em;
        color: var(--accent-secondary);
        opacity: 0.7;
    }

    .link-desc {
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-top: 0.2rem;
    }

    /* =========================================
       7. Today's Musicã‚«ãƒ¼ãƒ‰ & ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
       ========================================= */
    .recommendation-card {
        margin-top: 2rem;
        text-align: center;
        min-height: 250px;
        justify-content: space-between;
    }

    .song-container {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 1rem 0;
    }

    .song-title {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--accent-blue);
        margin: 0;
        line-height: 1.2;
        padding: 0 1rem;
    }

    .song-year-wrapper {
        margin-top: 0.5rem;
        font-size: 0.9rem;
        color: var(--text-muted);
        font-family: 'JetBrains Mono', monospace;
        opacity: 0.8;
    }

    .song-year {
        font-weight: 700;
        color: var(--text-main);
    }

    .secondary-btn {
        margin-top: auto;
        padding: 0.6rem 1.2rem;
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-muted);
        border-radius: 99px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.85rem;
        font-weight: 600;
    }

    .secondary-btn:hover {
        border-color: var(--accent-blue);
        color: var(--accent-blue);
        background: rgba(2, 132, 199, 0.05);
    }

    .fade-in {
        animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(5px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes float-natural {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-8px);
        }
    }

    /* =========================================
       8. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­å®š (ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ)
       ========================================= */
    @media (max-width: 1024px) {
        .grid-container {
            gap: 2rem;
        }
    }

    @media (max-width: 720px) {
        .hero {
            padding: 4rem 0 6rem;
        }

        .hero-container {
            flex-direction: column;
            gap: 2rem;
            text-align: center;
        }

        .hero-img {
            margin-bottom: 2rem;
        }

        .hero-text-group {
            text-align: center;
        }

        .hero-title {
            font-size: 2.0rem;
        }

        .social-links {
            justify-content: center;
        }

        .post-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .post-card-mini {
            flex-direction: row;
            align-items: center;
            height: 100px;
        }

        .post-thumb {
            width: 100px;
            height: 100%;
            aspect-ratio: auto;
            flex-shrink: 0;
        }

        .post-info {
            padding: 0.8rem;
            flex-grow: 1;
        }

        .post-title {
            font-size: 0.9rem;
            -webkit-line-clamp: 2;
            margin-bottom: 0;
        }

        .badge {
            font-size: 0.5rem;
            padding: 1px 4px;
            top: 4px;
            right: 4px;
        }
    }
</style>